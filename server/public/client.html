<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Client Intake - Loaves and Fishes</title>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <div class="container">
      <div class="nonprofit-header">
        <img src="https://www.ccwva.org/wp-content/uploads/2023/10/cropped-cropped-ccwv-logo-1.png" alt="Catholic Charities West Virginia" class="org-logo" />
        <div class="org-info">
          <h1 class="org-name">Loaves and Fishes of Hinton, WV</h1>
          <p class="org-subtitle">Operated by Catholic Charities West Virginia</p>
        </div>
      </div>
      <div class="card">
        <h2>Welcome! Please fill out your information</h2>
        <form id="clientForm">
          <label>Name
            <input id="name" name="name" required />
          </label>
          <label>Date
            <input id="date" name="date" type="date" required />
          </label>
          <label>Notes
            <textarea id="notes" name="notes" placeholder="Anything you'd like us to know?"></textarea>
          </label>
          <button type="submit">Submit</button>
        </form>
        <div id="thanks" style="display:none; margin-top:20px; color:green;">Thank you! Your information has been received.</div>
      </div>
    </div>
    <script>
      document.getElementById('clientForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const data = {
          name: document.getElementById('name').value.trim(),
          date: document.getElementById('date').value,
          notes: document.getElementById('notes').value.trim()
        };
  // Autofill date field
  document.getElementById('date').value = new Date().toISOString().slice(0,10);
        await fetch('/api/client-intake', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('clientForm').style.display = 'none';
        document.getElementById('thanks').style.display = 'block';
      });
    </script>
  </body>
</html>
